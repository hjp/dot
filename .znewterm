# Initializations to be done on a new terminal. This is
# called both from .zlogin and .zshrc

# default initialization
if [ -r /usr/local/lib/profile-parts/term ]
then
	. /usr/local/lib/profile-parts/term
fi

# terminal customization

if [[ .$TERM. = .console. ]]
then
	# Linux console
	TERM=vt200
	stty rows 25 cols 80
fi

if [[ .$TERM. = .vt200. ]]
then
	# vt200 not known here 
	TERM=vt100
	stty erase 
fi

if [[ .$TERM. = .xterm. ]]
then
	prompt="%{]0;%m(%l)%n %~%}%B%m:%~ %T %h%# %b"
	if test "`uname`" = HP-UX
	then
	    export REMOTEHOST=`
		    /bin/who -muR |
		    tr -s ' ' '	' |
		    cut -f 8 | cut -d : -f 1`
	else
	    export REMOTEHOST=`
		    who am i |
		    grep '(.*)' |
		    sed -e 's/.*(\(.*\)).*/\1/'`
	fi
	if [[ -z "$DISPLAY" ]]
	then
		export DISPLAY=${REMOTEHOST}:0.0
	fi
	# force backspace key to send BS:
	# warning: This works with real xterm and rxvt
	# it doesn't work with konsole or gnome-terminal.
	echo '[?67h'
	stty erase 
else
	prompt="%B%m:%~ %T %h%# %b"
fi

export PROMPT
znewtermexecuted=true
