# Initializations to be done on a new terminal. This is
# called both from .zlogin and .zshrc

# default control characters
stty erase  kill  susp  intr 

# terminal customization

if [[ .$TERM. = .console. ]]
then
	# Linux console
	TERM=vt200
	stty rows 25 cols 80
fi

if [[ .$TERM. = .vt200. ]]
then
	# vt200 not known here 
	TERM=vt100
	stty erase 
fi

if [[ .$TERM. = .xterm. ]]
then
	prompt="%{]0;%m(%l)%n %~%}$SHLVL.%h%# "
	if test "`uname`" = HP-UX
	then
	    export REMOTEHOST=`
		    /bin/who -muR |
		    tr -s ' ' '	' |
		    cut -f 8 | cut -d : -f 1`
	else
	    export REMOTEHOST=`
		    who am i |
		    sed -e 's/.*(\(.*\)).*/\1/'`
	fi
	if [[ -z "$DISPLAY" ]]
	then
		export DISPLAY=${REMOTEHOST}:0.0
	fi
	if expr "$REMOTEHOST" : ".*\.vmars\.tuwien\.ac\.at" > /dev/null
	then
		stty erase 
	fi

	# Do we need this at all? On linux this messes things up.
	#eval `resize`
else
	prompt="%m(%l)%n %~ $SHLVL.%h%# "
fi

export PROMPT
znewtermexecuted=true
